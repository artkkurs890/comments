<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Комментарии</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 20px auto; }
        textarea { width: 100%; height: 80px; padding: 10px; }
        button { padding: 10px 15px; margin-top: 5px; cursor: pointer; }
        ul { list-style: none; padding: 0; }
        li { background: #f4f4f4; margin: 5px 0; padding: 10px; }
    </style>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js"></script>

    <script>
        console.log("Проверяем Firebase...");

        const firebaseConfig = {
            apiKey: "AIzaSyDa0FAsfEfbmKftbipZsIXz5hZoW1WIQFQ",
            authDomain: "comments-aa1fb.firebaseapp.com",
            databaseURL: "https://comments-aa1fb-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "comments-aa1fb",
            storageBucket: "comments-aa1fb.appspot.com",
            messagingSenderId: "699556396912",
            appId: "1:699556396912:web:d81ccd29e8bf44af67d9b5",
            measurementId: "G-EQD9ZVS550"
        };

        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        function addComment() {
            const commentInput = document.getElementById("commentInput");
            const commentText = commentInput.value.trim();

            if (commentText === "") {
                alert("Введите комментарий!");
                return;
            }

            db.ref("comments").push({ text: commentText })
                .then(() => {
                    alert("✅ Комментарий добавлен!");
                    commentInput.value = "";
                })
                .catch(error => {
                    alert("❌ Ошибка добавления: " + error.message);
                });
        }

        function loadComments() {
            const commentsList = document.getElementById("commentsList");
            db.ref("comments").on("value", snapshot => {
                commentsList.innerHTML = "";
                snapshot.forEach(childSnapshot => {
                    const li = document.createElement("li");
                    li.textContent = childSnapshot.val().text;
                    commentsList.appendChild(li);
                });
            });
        }

        window.onload = loadComments;
    </script>
</head>
<body>
    <h2>Комментарии</h2>
    <textarea id="commentInput" placeholder="Введите комментарий..."></textarea>
    <button onclick="addComment()">Добавить комментарий</button>
    <ul id="commentsList"></ul>
</body>
</html>
